/**
 * Сервис для работы с городами
 */

/**
 * Нормализует название города (удаляет лишние пробелы, приводит к нижнему регистру)
 * @param cityName Название города
 * @returns string
 */
export const normalizeCity = (cityName: string): string => {
  return cityName.toLowerCase().trim();
};

/**
 * Получает альтернативное название города для поиска
 * @param cityName Название города
 * @returns string
 */
export const getAlternativeCityName = (cityName: string): string => {
  // Словарь соответствий неофициальных названий официальным
  const cityAliases: Record<string, string> = {
    // Крупные города России
    'питер': 'санкт-петербург',
    'спб': 'санкт-петербург',
    'петербург': 'санкт-петербург',
    'ленинград': 'санкт-петербург',
    'москва-сити': 'москва',
    'мск': 'москва',
    'мосвка': 'москва', // опечатка
    'екат': 'екатеринбург',
    'екб': 'екатеринбург',
    'нск': 'новосибирск',
    'нножн': 'нижний новгород',
    'нижний': 'нижний новгород',
    'крск': 'красноярск',
    'челяба': 'челябинск',
    'владик': 'владивосток',
    'ростов': 'ростов-на-дону',
    'ростов-дон': 'ростов-на-дону',
    'уфа': 'уфа',
    'казань': 'казань',
    'самара': 'самара',
    
    // Курортные города
    'сочи': 'сочи',
    'анапа': 'анапа',
    'геленджик': 'геленджик',
    'ялта': 'ялта',
    'симферополь': 'симферополь',
    'севастополь': 'севастополь',
    
    // Не города (пустая строка означает что это не город)
    'сибирь': '',
    'урал': '',
    'кавказ': '',
    'европа': '',
    'россия': '',
    'америка': '',
    'африка': '',
    'азия': '',
    'евразия': ''
  };
  
  const normalizedCity = normalizeCity(cityName);
  
  // Проверка на русские буквы
  const russianRegex = /^[а-яА-ЯёЁ\s-]+$/;
  if (!russianRegex.test(normalizedCity)) {
    return ''; // Возвращаем пустую строку, если название не на русском
  }
  
  return cityAliases[normalizedCity] !== undefined ? cityAliases[normalizedCity] : normalizedCity;
}; 